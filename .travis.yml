language: ruby
cache: bundler
rvm:
- 2.6
bundler_args: "--without integration"
before_script:
- bundle exec berks
install:
- travis_wait bundle install
script:
- bundle exec rake
- knife cookbook metadata from file metadata.rb
deploy:
  edge: true
  provider: chef_supermarket
  user_id: sergikstro
  name: abiquo
  category: Operating Systems & Virtualization
  client_key: .travis/client.pem
  on:
    tags: true
before_install:
- openssl aes-256-cbc -K $encrypted_2721fd63ec23_key -iv $encrypted_2721fd63ec23_iv
  -in .travis/client.pem.enc -out .travis/client.pem -d

